CREATE TABLE `Users` (
  `UserID` int NOT NULL AUTO_INCREMENT,
  `Username` varchar(50) NOT NULL,
  `Password` varchar(255) NOT NULL,
  `FirstName` varchar(50) NOT NULL,
  `LastName` varchar(50) NOT NULL,
  `Email` varchar(100) NOT NULL,
  `UserRole` enum('Admin','Fundraising Admin','Staff') NOT NULL,
  `IsActive` tinyint(1) NOT NULL,
  `LastLogin` datetime DEFAULT NULL,
  `AssociatedAccountID` int DEFAULT NULL,
  `CampaignAccess` text,
  PRIMARY KEY (`UserID`)
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `Accounts` (
  `AccountID` int NOT NULL AUTO_INCREMENT,
  `OrganizationName` varchar(100) NOT NULL,
  `AccountType` enum('Corporation','Governmental Department','Aid Agency','Grant Foundation','Retail (3rd Party Fundraising)') NOT NULL,
  `AccountSize` enum('Small','Medium','Large') DEFAULT NULL,
  `GivingPotential` decimal(15,2) DEFAULT NULL,
  `AccountLocation` varchar(255) DEFAULT NULL,
  `AccountChannel` varchar(50) DEFAULT NULL,
  `Segment` enum('Energy','Retail') DEFAULT NULL,
  `PriorDonations` decimal(15,2) DEFAULT NULL,
  `AccountManagerID` int NOT NULL,
  `RecordCreatedBy` int NOT NULL,
  `RecordLastModifiedBy` int NOT NULL,
  `CreatedTimestamp` datetime NOT NULL,
  `ModifiedTimestamp` datetime NOT NULL,
  `ExternalSystemID` varchar(50) DEFAULT NULL,
  `Notes` text,
  PRIMARY KEY (`AccountID`),
  KEY `AccountManagerID` (`AccountManagerID`),
  KEY `RecordCreatedBy` (`RecordCreatedBy`),
  KEY `RecordLastModifiedBy` (`RecordLastModifiedBy`),
  CONSTRAINT `Accounts_ibfk_1` FOREIGN KEY (`AccountManagerID`) REFERENCES `Users` (`UserID`),
  CONSTRAINT `Accounts_ibfk_2` FOREIGN KEY (`RecordCreatedBy`) REFERENCES `Users` (`UserID`),
  CONSTRAINT `Accounts_ibfk_3` FOREIGN KEY (`RecordLastModifiedBy`) REFERENCES `Users` (`UserID`)
) ENGINE=InnoDB AUTO_INCREMENT=36 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `Contacts` (
  `ContactID` int NOT NULL AUTO_INCREMENT,
  `FirstName` varchar(100) DEFAULT NULL,
  `LastName` varchar(100) DEFAULT NULL,
  `OfficialEmailAddress` varchar(255) DEFAULT NULL,
  `PersonalEmailAddress` varchar(255) DEFAULT NULL,
  `OfficialPhoneNumber` varchar(20) DEFAULT NULL,
  `PersonalPhoneNumber` varchar(20) DEFAULT NULL,
  `Role` varchar(100) DEFAULT NULL,
  `AssociatedAccount` int DEFAULT NULL,
  `ContactChannel` varchar(100) DEFAULT NULL,
  `IsActive` tinyint(1) DEFAULT NULL,
  `LastContactDate` datetime DEFAULT NULL,
  `PreferredLanguage` varchar(50) DEFAULT NULL,
  `DoNotContact` tinyint(1) DEFAULT NULL,
  `RecordCreatedBy` int DEFAULT NULL,
  `RecordLastModifiedBy` int DEFAULT NULL,
  `CreatedTimestamp` timestamp NULL DEFAULT CURRENT_TIMESTAMP,
  `ModifiedTimestamp` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `ExternalSystemID` varchar(100) DEFAULT NULL,
  `Notes` text,
  PRIMARY KEY (`ContactID`),
  KEY `FK_AssociatedAccount` (`AssociatedAccount`),
  CONSTRAINT `FK_AssociatedAccount` FOREIGN KEY (`AssociatedAccount`) REFERENCES `Accounts` (`AccountID`)
) ENGINE=InnoDB AUTO_INCREMENT=41 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `Campaigns` (
  `CampaignID` int NOT NULL AUTO_INCREMENT,
  `CampaignName` varchar(100) NOT NULL,
  `CampaignType` enum('Blue-Sky','Grey-Sky') NOT NULL,
  `StartDate` date NOT NULL,
  `EndDate` date DEFAULT NULL,
  `TargetAmount` decimal(15,2) DEFAULT NULL,
  `Description` text,
  `IsActive` tinyint(1) NOT NULL,
  `CampaignManagerID` int NOT NULL,
  PRIMARY KEY (`CampaignID`),
  KEY `CampaignManagerID` (`CampaignManagerID`),
  CONSTRAINT `Campaigns_ibfk_1` FOREIGN KEY (`CampaignManagerID`) REFERENCES `Users` (`UserID`)
) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `Activities` (
  `ActivityID` int NOT NULL AUTO_INCREMENT,
  `AccountID` int NOT NULL,
  `ContactID` int DEFAULT NULL,
  `ActivityType` enum('Email','Meeting','Phone Call','Note') NOT NULL,
  `ActivityDate` datetime NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `CreatedBy` int NOT NULL,
  `Description` text,
  PRIMARY KEY (`ActivityID`),
  KEY `AccountID` (`AccountID`),
  KEY `ContactID` (`ContactID`),
  KEY `CreatedBy` (`CreatedBy`),
  CONSTRAINT `Activities_ibfk_1` FOREIGN KEY (`AccountID`) REFERENCES `Accounts` (`AccountID`),
  CONSTRAINT `Activities_ibfk_2` FOREIGN KEY (`ContactID`) REFERENCES `Contacts` (`ContactID`) ON DELETE SET NULL,
  CONSTRAINT `Activities_ibfk_3` FOREIGN KEY (`CreatedBy`) REFERENCES `Users` (`UserID`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

CREATE TABLE `Donations` (
  `DonationID` int NOT NULL AUTO_INCREMENT,
  `AccountID` int DEFAULT NULL,
  `ContactID` int DEFAULT NULL,
  `CampaignID` int DEFAULT NULL,
  `Amount` decimal(15,2) NOT NULL,
  `Currency` enum('IDR','USD') NOT NULL DEFAULT 'IDR',
  `DonationDate` date NOT NULL,
  `DonationStatus` enum('Solicited','Committed','Received') NOT NULL,
  `DonationSource` varchar(50) DEFAULT NULL,
  `Designation` varchar(50) DEFAULT NULL,
  `Notes` text,
  `InKind` tinyint(1) NOT NULL,
  `PendingAmount` decimal(15,2) DEFAULT NULL,
  `AccountManagerID` int DEFAULT NULL,
  `RecordCreatedBy` int NOT NULL,
  `RecordLastModifiedBy` int NOT NULL,
  `CreatedTimestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `ModifiedTimestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `ExternalSystemID` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`DonationID`),
  KEY `AccountID` (`AccountID`),
  KEY `ContactID` (`ContactID`),
  KEY `CampaignID` (`CampaignID`),
  KEY `AccountManagerID` (`AccountManagerID`),
  KEY `RecordCreatedBy` (`RecordCreatedBy`),
  KEY `RecordLastModifiedBy` (`RecordLastModifiedBy`),
  CONSTRAINT `Donations_ibfk_1` FOREIGN KEY (`AccountID`) REFERENCES `Accounts` (`AccountID`),
  CONSTRAINT `Donations_ibfk_2` FOREIGN KEY (`ContactID`) REFERENCES `Contacts` (`ContactID`),
  CONSTRAINT `Donations_ibfk_3` FOREIGN KEY (`CampaignID`) REFERENCES `Campaigns` (`CampaignID`),
  CONSTRAINT `Donations_ibfk_4` FOREIGN KEY (`AccountManagerID`) REFERENCES `Users` (`UserID`),
  CONSTRAINT `Donations_ibfk_5` FOREIGN KEY (`RecordCreatedBy`) REFERENCES `Users` (`UserID`),
  CONSTRAINT `Donations_ibfk_6` FOREIGN KEY (`RecordLastModifiedBy`) REFERENCES `Users` (`UserID`)
) ENGINE=InnoDB AUTO_INCREMENT=11 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;