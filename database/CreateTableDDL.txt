CREATE TABLE Users (
    UserID INT AUTO_INCREMENT PRIMARY KEY,
    Username VARCHAR(50) NOT NULL,
    Password VARCHAR(255) NOT NULL,
    FirstName VARCHAR(50) NOT NULL,
    LastName VARCHAR(50) NOT NULL,
    Email VARCHAR(100) NOT NULL,
    UserRole ENUM('Admin', 'Fundraising Admin', 'Staff') NOT NULL,
    IsActive BOOLEAN NOT NULL,
    LastLogin DATETIME,
    AssociatedAccountID INT,
    CampaignAccess TEXT
);
CREATE TABLE `Accounts` (
  `AccountID` int NOT NULL AUTO_INCREMENT,
  `OrganizationName` varchar(100) NOT NULL,
  `AccountType` enum('Corporation','Governmental Department','Aid Agency','Grant Foundation','Retail (3rd Party Fundraising)') NOT NULL,
  `AccountSize` enum('Small','Medium','Large') DEFAULT NULL,
  `GivingPotential` decimal(15,2) DEFAULT NULL,
  `AccountLocation` varchar(255) DEFAULT NULL,
  `AccountChannel` varchar(50) DEFAULT NULL,
  `Segment` enum('Energy','Retail') DEFAULT NULL,
  `PriorDonations` decimal(15,2) DEFAULT NULL,
  `AccountManagerID` int NOT NULL,
  `RecordCreatedBy` int NOT NULL,
  `RecordLastModifiedBy` int NOT NULL,
  `CreatedTimestamp` datetime NOT NULL,
  `ModifiedTimestamp` datetime NOT NULL,
  `ExternalSystemID` varchar(50) DEFAULT NULL,
  `Notes` text,
  PRIMARY KEY (`AccountID`),
  KEY `AccountManagerID` (`AccountManagerID`),
  KEY `RecordCreatedBy` (`RecordCreatedBy`),
  KEY `RecordLastModifiedBy` (`RecordLastModifiedBy`),
  CONSTRAINT `Accounts_ibfk_1` FOREIGN KEY (`AccountManagerID`) REFERENCES `Users` (`UserID`),
  CONSTRAINT `Accounts_ibfk_2` FOREIGN KEY (`RecordCreatedBy`) REFERENCES `Users` (`UserID`),
  CONSTRAINT `Accounts_ibfk_3` FOREIGN KEY (`RecordLastModifiedBy`) REFERENCES `Users` (`UserID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci


CREATE TABLE Contacts (
    ContactID INT AUTO_INCREMENT PRIMARY KEY,
    FirstName VARCHAR(50) NOT NULL,
    LastName VARCHAR(50),
    FamilyName VARCHAR(50) NOT NULL,
    OfficialEmailAddress VARCHAR(100) UNIQUE,
    PersonalEmailAddress VARCHAR(100),
    CountryCode VARCHAR(5),
    OfficialPhoneNumber VARCHAR(20),
    PersonalPhoneNumber VARCHAR(20),
    Building VARCHAR(100),
    Location VARCHAR(100),
    City VARCHAR(50),
    Province VARCHAR(50),
    PostalCode VARCHAR(20),
    Country VARCHAR(50),
    Role VARCHAR(100),
    AssociatedAccount INT,
    Segment VARCHAR(50),
    ContactChannel VARCHAR(50),
    IsActive BOOLEAN NOT NULL,
    LastContactDate DATE,
    PreferredLanguage ENUM('Bahasa Indonesia', 'English'),
    DoNotContact BOOLEAN NOT NULL,
    AccountContactRole VARCHAR(100),
    RecordCreatedBy INT NOT NULL,
    RecordLastModifiedBy INT NOT NULL,
    CreatedTimestamp DATETIME NOT NULL,
    ModifiedTimestamp DATETIME NOT NULL,
    ExternalSystemID VARCHAR(50),
    Notes TEXT,
    FOREIGN KEY (AssociatedAccount) REFERENCES Accounts(AccountID),
    FOREIGN KEY (RecordCreatedBy) REFERENCES Users(UserID),
    FOREIGN KEY (RecordLastModifiedBy) REFERENCES Users(UserID)
);

CREATE TABLE Contacts (
    ContactID INT AUTO_INCREMENT PRIMARY KEY,
    FirstName VARCHAR(50) NOT NULL,
    LastName VARCHAR(50),
    FamilyName VARCHAR(50) NOT NULL,
    OfficialEmailAddress VARCHAR(100) UNIQUE,
    PersonalEmailAddress VARCHAR(100),
    CountryCode VARCHAR(5),
    OfficialPhoneNumber VARCHAR(20),
    PersonalPhoneNumber VARCHAR(20),
    Building VARCHAR(100),
    Location VARCHAR(100),
    City VARCHAR(50),
    Province VARCHAR(50),
    PostalCode VARCHAR(20),
    Country VARCHAR(50),
    Role VARCHAR(100),
    AssociatedAccount INT,
    Segment VARCHAR(50),
    ContactChannel VARCHAR(50),
    IsActive BOOLEAN NOT NULL,
    LastContactDate DATE,
    PreferredLanguage ENUM('Bahasa Indonesia', 'English'),
    DoNotContact BOOLEAN NOT NULL,
    AccountContactRole VARCHAR(100),
    RecordCreatedBy INT NOT NULL,
    RecordLastModifiedBy INT NOT NULL,
    CreatedTimestamp DATETIME NOT NULL,
    ModifiedTimestamp DATETIME NOT NULL,
    ExternalSystemID VARCHAR(50),
    Notes TEXT,
    FOREIGN KEY (AssociatedAccount) REFERENCES Accounts(AccountID),
    FOREIGN KEY (RecordCreatedBy) REFERENCES Users(UserID),
    FOREIGN KEY (RecordLastModifiedBy) REFERENCES Users(UserID)
);


CREATE TABLE Campaigns (
    CampaignID INT AUTO_INCREMENT PRIMARY KEY,
    CampaignName VARCHAR(100) NOT NULL,
    CampaignType ENUM('Blue-Sky', 'Grey-Sky') NOT NULL,
    StartDate DATE NOT NULL,
    EndDate DATE,
    TargetAmount DECIMAL(15,2),
    Description TEXT,
    IsActive BOOLEAN NOT NULL,
    CampaignManagerID INT NOT NULL,
    FOREIGN KEY (CampaignManagerID) REFERENCES Users(UserID)
);


CREATE TABLE Donations (
    DonationID INT AUTO_INCREMENT PRIMARY KEY,
    AccountID INT,
    ContactID INT,
    CampaignID INT,
    Amount DECIMAL(15,2) NOT NULL,
    Currency ENUM('IDR', 'USD') NOT NULL DEFAULT 'IDR',
    DonationDate DATE NOT NULL,
    DonationStatus ENUM('Solicited', 'Committed', 'Received') NOT NULL,
    DonationSource VARCHAR(50),
    Designation VARCHAR(50),
    Notes TEXT,
    InKind BOOLEAN NOT NULL,
    PendingAmount DECIMAL(15,2),
    AccountManagerID INT,
    RecordCreatedBy INT NOT NULL,
    RecordLastModifiedBy INT NOT NULL,
    CreatedTimestamp DATETIME NOT NULL,
    ModifiedTimestamp DATETIME NOT NULL,
    ExternalSystemID VARCHAR(50),
    FOREIGN KEY (AccountID) REFERENCES Accounts(AccountID),
    FOREIGN KEY (ContactID) REFERENCES Contacts(ContactID),
    FOREIGN KEY (CampaignID) REFERENCES Campaigns(CampaignID),
    FOREIGN KEY (AccountManagerID) REFERENCES User(UserID),
    FOREIGN KEY (RecordCreatedBy) REFERENCES Users(UserID),
    FOREIGN KEY (RecordLastModifiedBy) REFERENCES Users(UserID)
);


CREATE TABLE InKindDonations (
    InKindDonationID INT AUTO_INCREMENT PRIMARY KEY,
    DonationID INT NOT NULL,
    ItemDescription VARCHAR(255) NOT NULL,
    Quantity INT NOT NULL,
    ItemCondition VARCHAR(50),
    Valuation DECIMAL(15,2),
    ValuationDate DATE,
    ReceivedLocation VARCHAR(255),
    Notes TEXT,
    FOREIGN KEY (DonationID) REFERENCES Donations(DonationID)
);

